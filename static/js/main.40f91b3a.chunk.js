(this["webpackJsonpcatalog-of-books"]=this["webpackJsonpcatalog-of-books"]||[]).push([[0],{10:function(e,t,a){e.exports={root:"BooksDescription_root__3ykQ8",blackBgWhiteText:"BooksDescription_blackBgWhiteText__2WRPw",bookName:"BooksDescription_bookName__2xzRf",whiteText:"BooksDescription_whiteText__3HxQM",whiteBgBlackText:"BooksDescription_whiteBgBlackText__1vIy7",blackText:"BooksDescription_blackText__3-V-i",back:"BooksDescription_back__2TDOr",text:"BooksDescription_text__2LNYr",form:"BooksDescription_form__11VU3",input:"BooksDescription_input__6X8re",button:"BooksDescription_button__iiaHc",editButton:"BooksDescription_editButton__2l4nQ"}},17:function(e,t,a){e.exports={wrapper:"Header_wrapper__32J5P",blackBgWhiteText:"Header_blackBgWhiteText__2GQma",leftText:"Header_leftText__ZSpkj",rightText:"Header_rightText__3-mzj",littleBlackText:"Header_littleBlackText__1FOg3",whiteBgBlackText:"Header_whiteBgBlackText__1MjPi",ellipse:"Header_ellipse__hIKRG",rightLine:"Header_rightLine__pvmq2",leftLine:"Header_leftLine__3Ly6W"}},18:function(e,t,a){e.exports={flex:"Footer_flex__2lgxi",blackBgWhiteText:"Footer_blackBgWhiteText__22k07",whiteBgBlackText:"Footer_whiteBgBlackText__2e8LL",footerTextLeft:"Footer_footerTextLeft__1kuze",footerTextRight:"Footer_footerTextRight__18Rvm",footerTextEmail:"Footer_footerTextEmail__1UuOx",ellipse:"Footer_ellipse__3Dk7_",rightLine:"Footer_rightLine__1ZxC6",leftLine:"Footer_leftLine__22s-K"}},2:function(e,t,a){e.exports={book:"Book_book__1FaJX",border:"Book_border__1z-KX",editBlock:"Book_editBlock__3RbYa",edit:"Book_edit__o-gpV",delete:"Book_delete__24aLZ",item:"Book_item__1Tu3J",form:"Book_form__WDpLy",formItem:"Book_formItem__11lKO",labelErrors:"Book_labelErrors__3wMpk",text:"Book_text__1DLJD",input:"Book_input__3i1Ve",errors:"Book_errors__CAANK",button:"Book_button__3nj-8"}},202:function(e,t,a){"use strict";a.r(t);var r,o=a(0),c=a.n(o),s=a(8),n=a(46),i=a.n(n),l=(a(65),a(31)),d=a(6),b=a(21),u=a(37),j=a.n(u),h=a(29),m=a(4),p=a(15),x=a.n(p),O=a(32),f=a(16),_=Object(f.b)("items/getItems",function(){var e=Object(O.a)(x.a.mark((function e(t,a){var r,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,e.prev=1,e.next=4,fetch("https://my-json-server.typicode.com/MTasia/catalog-of-books-server/items");case 4:if((o=e.sent).ok){e.next=7;break}throw new Error("Server error");case 7:return e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",r(e.t0.massage));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}()),k=Object(f.b)("items/deleteBook",function(){var e=Object(O.a)(x.a.mark((function e(t,a){var r,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,o=a.dispatch,e.prev=1,e.next=4,fetch("https://my-json-server.typicode.com/MTasia/catalog-of-books-server/items/".concat(t),{method:"DELETE"});case 4:if(e.sent.ok){e.next=7;break}throw new Error("Can't delete book. Server error.");case 7:o(D(t)),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()),v=Object(f.b)("items/addBook",function(){var e=Object(O.a)(x.a.mark((function e(t,a){var r,o,c,s,n,i,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,o=a.dispatch,e.prev=1,c=t.id,s=t.name,n=t.author,i=t.year,l=t.description,e.next=5,fetch("https://my-json-server.typicode.com/MTasia/catalog-of-books-server/items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:c,name:s,author:n,year:i,description:l,edited:!1})});case 5:if(e.sent.ok){e.next=8;break}throw new Error("Can't add book. Server error.");case 8:o(C(t)),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()),B=Object(f.b)("items/editedBook",function(){var e=Object(O.a)(x.a.mark((function e(t,a){var r,o,c,s,n,i,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rejectWithValue,o=a.dispatch,e.prev=1,c=t.id,s=t.name,n=t.author,i=t.year,l=t.description,e.next=5,fetch("https://my-json-server.typicode.com/MTasia/catalog-of-books-server/items/".concat(c),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,author:n,year:i,description:l,edited:!1})});case 5:if(e.sent.ok){e.next=8;break}throw new Error("Can't edit book. Server error.");case 8:o(A(t)),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}()),N=Object(f.b)("items/addDescription",function(){var e=Object(O.a)(x.a.mark((function e(t,a){var r,o,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,o=t.description,c=a.rejectWithValue,s=a.dispatch,e.prev=2,e.next=5,fetch("https://my-json-server.typicode.com/MTasia/catalog-of-books-server/items/".concat(r),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:o})});case 5:if(e.sent.ok){e.next=8;break}throw new Error("Can't add description book. Server error.");case 8:s(S({id:r,description:o})),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}()),y=function(e,t){return Object(m.a)(Object(m.a)({},e),{},{status:"rejected",error:t.payload})},g=Object(f.c)({name:"listOfBook",initialState:{listOfBook:[],searchFilter:"",error:null,status:null},reducers:{addBook:function(e,t){var a=[t.payload];return Object(m.a)(Object(m.a)({},e),{},{listOfBook:a.concat(e.listOfBook)})},changeFilter:function(e,t){return Object(m.a)(Object(m.a)({},e),{},{searchFilter:t.payload})},addDescription:function(e,t){var a=t.payload,r=a.id,o=a.description,c=e.listOfBook.map((function(e){return r===e.id.toString()?Object(m.a)(Object(m.a)({},e),{},{description:o}):Object(m.a)({},e)}));return Object(m.a)(Object(m.a)({},e),{},{listOfBook:c})},deleteBook:function(e,t){var a=e.listOfBook.filter((function(e){return e.id!==t.payload}));return Object(m.a)(Object(m.a)({},e),{},{listOfBook:a})},startEditedBook:function(e,t){var a=e.listOfBook.map((function(e){return t.payload===e.id?Object(m.a)(Object(m.a)({},e),{},{edited:!0}):Object(m.a)({},e)}));return Object(m.a)(Object(m.a)({},e),{},{listOfBook:a})},endEditedBook:function(e,t){var a=t.payload,r=a.id,o=a.name,c=a.author,s=a.year,n=a.description,i=e.listOfBook.map((function(e){return r===e.id?Object(m.a)(Object(m.a)({},e),{},{name:o,author:c,year:s,edited:!1,description:n}):Object(m.a)({},e)}));return Object(m.a)(Object(m.a)({},e),{},{listOfBook:i})}},extraReducers:(r={},Object(h.a)(r,_.pending,(function(e){return Object(m.a)(Object(m.a)({},e),{},{status:"loading"})})),Object(h.a)(r,_.fulfilled,(function(e,t){return Object(m.a)(Object(m.a)({},e),{},{status:"resolved",listOfBook:t.payload})})),Object(h.a)(r,_.rejected,y),Object(h.a)(r,k.rejected,y),r)}),T=g.actions,w=g.reducer,C=T.addBook,E=T.changeFilter,S=T.addDescription,D=T.deleteBook,L=T.startEditedBook,A=T.endEditedBook,F=w,W=a(47),I=function(e){return e.bookReducer.listOfBook},M=function(e){return e.bookReducer.searchFilter},R=Object(W.a)([I,M],(function(e,t){return void 0===t||""===t.trim()?e:e.filter((function(e){return!e.name.toUpperCase().indexOf(t.trim().toUpperCase())}))})),H=Object(W.a)(I,(function(e,t){return t}),(function(e,t){var a={};return e.map((function(e){return e.id.toString()===t&&(a=e),e})),a})),J=a(1),V=function(){var e=Object(s.c)(M),t=Object(o.useState)(e),a=Object(b.a)(t,2),r=a[0],c=a[1],n=Object(s.b)(),i=Object(o.useCallback)((function(e){n(E(e))}),[]);return Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{className:j.a.header,children:"Books"}),Object(J.jsxs)("form",{className:j.a.form,onSubmit:function(e){e.preventDefault(),r.trim()&&i(r)},children:[Object(J.jsx)("input",{placeholder:"Search book",className:j.a.input,name:"searchBook",type:"text",value:r,onChange:function(e){c(e.currentTarget.value),i(e.currentTarget.value)}}),Object(J.jsx)("button",{type:"submit",className:j.a.button,children:"Search"})]})]})},q=a(2),Y=a.n(q),z=a(51),P=a(38),U=P.b({name:P.c().min(2,"Too Short!").required("Required"),author:P.c("Enter author used only letters").min(2,"Too Short!").required("Required"),year:P.a("Must be only number").max(2021,"Must be letter then today").required("Required")}),K=function(e){var t=e.book,a={id:t.id,name:t.name,author:t.author,year:t.year,description:t.description},r=Object(s.b)(),c=Object(o.useCallback)((function(e){r(B(e))})),n=Object(z.a)({initialValues:a,validationSchema:U,onSubmit:function(e,t){var a=t.resetForm;c(e),a({values:""})}});return Object(J.jsxs)("form",{className:Y.a.form,children:[Object(J.jsxs)("div",{className:Y.a.formItem,children:[Object(J.jsxs)("div",{className:Y.a.labelErrors,children:[Object(J.jsx)("label",{className:Y.a.text,children:"Name of book"}),n.touched.name&&n.errors.name&&Object(J.jsx)("div",{className:Y.a.errors,children:n.errors.name})]}),Object(J.jsx)("input",{className:Y.a.input,name:"name",type:"text",value:n.values.name,onChange:n.handleChange})]}),Object(J.jsxs)("div",{className:Y.a.formItem,children:[Object(J.jsxs)("div",{className:Y.a.labelErrors,children:[Object(J.jsx)("label",{className:Y.a.text,children:"Author"}),n.touched.author&&n.errors.author&&Object(J.jsx)("div",{className:Y.a.errors,children:n.errors.author})]}),Object(J.jsx)("input",{className:Y.a.input,name:"author",type:"text",value:n.values.author,onChange:n.handleChange})]}),Object(J.jsxs)("div",{className:Y.a.formItem,children:[Object(J.jsxs)("div",{className:Y.a.labelErrors,children:[Object(J.jsx)("label",{className:Y.a.text,children:"Year"}),n.touched.year&&n.errors.year&&Object(J.jsx)("div",{className:Y.a.errors,children:n.errors.year})]}),Object(J.jsx)("input",{className:Y.a.input,name:"year",type:"text",value:n.values.year,onChange:n.handleChange})]}),Object(J.jsxs)("div",{className:Y.a.formItem,children:[Object(J.jsxs)("div",{className:Y.a.labelErrors,children:[Object(J.jsx)("label",{className:Y.a.text,children:"Description"}),n.touched.description&&n.errors.description&&Object(J.jsx)("div",{className:Y.a.errors,children:n.errors.description})]}),Object(J.jsx)("input",{className:Y.a.input,name:"description",type:"text",value:n.values.description,onChange:n.handleChange})]}),Object(J.jsx)("button",{type:"button",onClick:n.handleSubmit,className:Y.a.button,children:"Done"})]})},Q=function(e){var t=e.book,a=Object(s.b)(),r=Object(o.useCallback)((function(){a(L(t.id))}));return Object(J.jsx)("div",{children:t.edited?Object(J.jsx)("div",{className:Y.a.border,children:Object(J.jsx)(K,{book:t})}):Object(J.jsxs)("div",{className:Y.a.border,children:[Object(J.jsxs)(l.b,{className:Y.a.item,to:"".concat("/catalog-of-books-server","/items/").concat(t.id),children:[Object(J.jsx)("div",{className:Y.a.book,children:t.name}),Object(J.jsxs)("div",{className:Y.a,children:["Author: ",t.author]}),Object(J.jsxs)("div",{className:Y.a,children:["Year of publication: ",t.year]})]}),Object(J.jsxs)("div",{className:Y.a.editBlock,children:[Object(J.jsx)("button",{type:"button",onClick:r,className:Y.a.edit,children:"Edit"}),Object(J.jsx)("button",{type:"button",onClick:function(){return a(k(t.id))},className:Y.a.delete,children:"Delete"})]})]})})},Z=a(93),X=a.n(Z),G=function(){var e=Object(s.c)(R);return Object(J.jsxs)("div",{className:X.a.listOfBooks,children:[Object(J.jsx)(V,{}),e.map((function(e){return Object(J.jsx)(Q,{book:e},e.id)}))]})},$=a(17),ee=a.n($),te=function(){return Object(J.jsxs)("div",{className:ee.a.wrapper,children:[Object(J.jsxs)("div",{className:ee.a.blackBgWhiteText,children:[Object(J.jsx)("p",{className:ee.a.leftText,children:"Books"}),Object(J.jsx)("div",{className:ee.a.leftLine})]}),Object(J.jsxs)("div",{className:ee.a.whiteBgBlackText,children:[Object(J.jsx)("p",{className:ee.a.rightText,children:"Catalog"}),Object(J.jsx)("p",{className:ee.a.littleBlackText,children:"interesting books"}),Object(J.jsx)("div",{className:ee.a.rightLine}),Object(J.jsx)("div",{className:ee.a.ellipse})]})]})},ae=a(5),re=a.n(ae),oe=function(){var e=Object(s.b)(),t=Object(o.useCallback)((function(t){e(v(t))}),[]),a=Object(z.a)({initialValues:{id:"",name:"",author:"",year:"",description:""},validationSchema:U,onSubmit:function(e,a){var r=a.resetForm,o={id:Date.now(),name:e.name,author:e.author,year:e.year,edited:!1,description:e.description};t(o),r({values:""})}});return Object(J.jsxs)("form",{className:re.a.form,children:[Object(J.jsxs)("div",{className:re.a.formItem,children:[Object(J.jsx)("div",{className:re.a.header,children:"Add my book"}),Object(J.jsxs)("div",{className:re.a.labelErrors,children:[Object(J.jsx)("label",{className:re.a.text,children:"Name of book"}),a.touched.name&&a.errors.name&&Object(J.jsx)("div",{className:re.a.errors,children:a.errors.name})]}),Object(J.jsx)("input",{className:re.a.input,name:"name",type:"text",value:a.values.name,onChange:a.handleChange})]}),Object(J.jsxs)("div",{className:re.a.formItem,children:[Object(J.jsxs)("div",{className:re.a.labelErrors,children:[Object(J.jsx)("label",{className:re.a.text,children:"Author"}),a.touched.author&&a.errors.author&&Object(J.jsx)("div",{className:re.a.errors,children:a.errors.author})]}),Object(J.jsx)("input",{className:re.a.input,name:"author",type:"text",value:a.values.author,onChange:a.handleChange})]}),Object(J.jsxs)("div",{className:re.a.formItem,children:[Object(J.jsxs)("div",{className:re.a.labelErrors,children:[Object(J.jsx)("label",{className:re.a.text,children:"Year of publication"}),a.touched.year&&a.errors.year&&Object(J.jsx)("div",{className:re.a.errors,children:a.errors.year})]}),Object(J.jsx)("input",{className:re.a.input,name:"year",type:"text",value:a.values.year,onChange:a.handleChange})]}),Object(J.jsxs)("div",{className:re.a.formItem,children:[Object(J.jsxs)("div",{className:re.a.labelErrors,children:[Object(J.jsx)("label",{className:re.a.text,children:"Description"}),a.touched.description&&a.errors.description&&Object(J.jsx)("div",{className:re.a.errors,children:a.errors.description})]}),Object(J.jsx)("input",{className:re.a.input,name:"description",type:"text",value:a.values.description,onChange:a.handleChange})]}),Object(J.jsx)("button",{type:"button",onClick:a.handleSubmit,className:re.a.button,children:"Add book"})]})},ce=a(18),se=a.n(ce),ne=function(){return Object(J.jsxs)("div",{className:se.a.flex,children:[Object(J.jsxs)("div",{className:se.a.blackBgWhiteText,children:[Object(J.jsx)("p",{className:se.a.footerTextLeft,children:"Created by"}),Object(J.jsx)("div",{className:se.a.leftLine})]}),Object(J.jsxs)("div",{className:se.a.whiteBgBlackText,children:[Object(J.jsx)("p",{className:se.a.footerTextRight,children:"Medvedeva Taya"}),Object(J.jsx)("div",{className:se.a.rightLine}),Object(J.jsx)("div",{className:se.a.ellipse}),Object(J.jsx)("p",{className:se.a.footerTextEmail,children:"taya_medeved@mail.ru"})]})]})},ie=function(){var e=Object(s.b)();return Object(o.useEffect)((function(){e(_())}),[e]),Object(J.jsxs)("div",{children:[Object(J.jsx)(te,{}),Object(J.jsxs)("div",{className:"content",children:[Object(J.jsx)(oe,{}),Object(J.jsx)(G,{})]}),Object(J.jsx)(ne,{})]})},le=a(20),de=a.n(le),be=a(10),ue=a.n(be);Q.propTypes={book:de.a.objectOf(de.a.any)};var je=function(){var e=Object(s.b)();Object(o.useEffect)((function(){e(_())}),[e]);var t=Object(d.e)().id,a=Object(s.c)((function(e){return H(e,t)})),r=Object(o.useCallback)((function(a){e(N({id:t,description:a}))}),[]),c=Object(o.useState)(""),n=Object(b.a)(c,2),i=n[0],u=n[1];return Object(J.jsxs)("div",{className:ue.a.root,children:[Object(J.jsxs)("div",{className:ue.a.blackBgWhiteText,children:[Object(J.jsx)("div",{className:ue.a.bookName,children:a.name}),Object(J.jsxs)("div",{className:ue.a.whiteText,children:["wrote by ",a.author]}),Object(J.jsxs)("div",{className:ue.a.whiteText,children:["in ",a.year," year"]}),Object(J.jsx)(l.b,{className:ue.a.back,to:"".concat("/catalog-of-books-server","/items"),children:"Back"})]}),Object(J.jsxs)("div",{className:ue.a.whiteBgBlackText,children:[Object(J.jsx)("div",{className:ue.a.blackText,children:"About book"}),""===a.description?Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{className:ue.a.text,children:"This book have not description, you can add it"}),Object(J.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i.trim()&&r(i),u("")},className:ue.a.form,children:[Object(J.jsx)("input",{placeholder:"Enter description",className:ue.a.input,value:i,onChange:function(e){u(e.currentTarget.value)}}),Object(J.jsx)("button",{className:ue.a.button,type:"submit",children:"Add"})]})]}):Object(J.jsx)("div",{className:ue.a.text,children:a.description})]})]})};var he=function(){return Object(J.jsxs)(l.a,{children:[Object(J.jsx)(d.a,{path:"".concat("/catalog-of-books-server","/"),exact:!0,component:ie}),Object(J.jsx)(d.a,{path:"".concat("/catalog-of-books-server","/items"),exact:!0,component:ie}),Object(J.jsx)(d.a,{path:"".concat("/catalog-of-books-server","/items/:id"),exact:!0,component:je})]})},me={bookReducer:F},pe=Object(f.a)({reducer:me});i.a.render(Object(J.jsx)(s.a,{store:pe,children:Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(he,{})})}),document.getElementById("root"))},37:function(e,t,a){e.exports={wrapper:"SearchBook_wrapper__qd3NJ",input:"SearchBook_input__1JYe5",button:"SearchBook_button__If0Me",header:"SearchBook_header__2lnUd",form:"SearchBook_form__2vHk6"}},5:function(e,t,a){e.exports={formItem:"AddBook_formItem__3nUiZ",label:"AddBook_label__2C7wz",input:"AddBook_input__2Y71j",header:"AddBook_header__b3_Ms",text:"AddBook_text__3NTW8",errors:"AddBook_errors__15Q6h",labelErrors:"AddBook_labelErrors__1n0C3",button:"AddBook_button__2AnE_",form:"AddBook_form__zMw0P"}},65:function(e,t,a){},93:function(e,t,a){e.exports={listOfBooks:"ListOfBooks_listOfBooks__5ZzY2"}}},[[202,1,2]]]);
//# sourceMappingURL=main.40f91b3a.chunk.js.map